<div id="modal" class="fixed inset-0 bg-Azul/90 z-[1001] hidden">
    <div
        class="bg-Amarillo max-w-[300px] p-[25px] mx-auto rounded-[8px] shadow-lg mt-[45svh]"
    >
        <h1 class="text-center font-Cocogoose text-[100%] text-white">
            Registro enviado correctamente
        </h1>
    </div>
</div>
<section
    class="pt-[140px] pb-[60px] lg:pt-[160px] mx-[4%] md:mx-[60px] lg:mx-[100px] lg:pb-[120px] bg-white"
>
    <div id="container" class="max-w-[1240px] mx-auto">
        <div
            id="flex"
            class="flex flex-col gap-[25px] lg:flex lg:flex-row lg:gap-[25px] lg:h-[900px]"
        >
            <div
                id="flexchild1"
                class="lg:w-1/2 order-2 bg-Azul rounded-[10px] px-[7%] py-[50px] lg:order-1 lg:px-[55px] lg:py-[7%] shadow-xl"
            >
                <h1
                    class="font-Cocogoose text-[280%] leading-[0.9] mb-[45px] text-white"
                >
                    Contacta con Nosotros
                </h1>
                <form
                    action="/exito"
                    id="contactanos"
                    name="contactanos"
                    method="POST"
                    data-netlify="true"
                >
                    <div id="flex1_form" class="flex gap-[30px] mb-[25px]">
                        <div id="child1" class="w-1/2 relative">
                            <label
                                for="nombre"
                                class="block font-Figtree italic font-semibold text-[90%] max-w-[150px] leading-[1] lg:leading-none md:max-w-[200px] lg:max-w-[150px] lg:text-[110%] lg:pb-[10px] text-Amarillo pb-[10px]"
                                >Nombre u Organización</label
                            >
                            <input
                                type="text"
                                class="bg-[#EAECEE] px-[5px] font-Figtree font-thin text-[94%] text-black rounded-[5px] min-h-[35px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600"
                                name="nombre"
                                id="nombre"
                                required
                            />
                            <p
                                id="nombreError"
                                class="absolute bottom-[-25px] text-red-600 font-Figtree font-semibold hidden"
                            >
                                Caracteres invalidos, revisa
                            </p>
                        </div>
                        <div id="child2" class="w-1/2">
                            <label
                                for="correo"
                                class="block font-Figtree i talic font-semibold text-[90%] max-w-[120px] leading-[1] lg:leading-none md:max-w-[200px] lg:max-w-[150px] lg:text-[110%] lg:pb-[10px] text-Amarillo pb-[10px]"
                                >Correo Electrónico</label
                            >
                            <input
                                type="email"
                                class="bg-[#EAECEE] px-[5px] font-Figtree font-thin text-[94%] text-black rounded-[5px] min-h-[35px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600"
                                name="correo"
                                id="correo"
                                required
                            />
                        </div>
                    </div>
                    <div id="flex1_form" class="flex gap-[30px] mb-[25px]">
                        <div id="child1" class="w-1/2">
                            <label
                                for="telefono"
                                class="block font-Figtree italic font-semibold text-[90%] lg:max-w-[140px] lg:text-[110%] leading-[1] lg:leading-none text-Amarillo pb-[6px]"
                                >Teléfono o celular</label
                            >
                            <input
                                type="text"
                                class="bg-[#EAECEE] px-[5px] font-Figtree font-thin text-[94%] text-black rounded-[5px] min-h-[35px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600"
                                name="telefono"
                                id="telefono"
                                required
                            />
                        </div>
                        <div id="child2" class="w-1/2">
                            <label
                                for="correo"
                                class="block font-Figtree i talic font-semibold text-[90%] lg:max-w-[140px] lg:text-[110%] leading-[1] lg:leading-none text-Amarillo pb-[6px]"
                                >Medio de contacto
                            </label>
                            <select
                                class="bg-[#EAECEE] px-[5px] font-Figtree font-thin text-[94%] text-black rounded-[5px] min-h-[35px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600"
                                name="medio[]"
                                id="medio"
                            >
                                <option
                                    value="Whatsapp"
                                    class="text-sm text-Azul">WhatsApp</option
                                >
                                <option value="Correo" class="text-sm text-Azul"
                                    >Correo Electrónico</option
                                >
                            </select>
                        </div>
                    </div>

                    <label
                        for="asunto"
                        class="block font-Figtree italic font-semibold text-[90%] lg:text-[110%] text-Amarillo pb-[6px]"
                        >Asunto</label
                    >
                    <textarea
                        class="bg-[#EAECEE] px-[6px] pt-[6px] font-Figtree font-thin text-[94%] leading-[1.2] min-h-[50px] max-h-[50px] text-black rounded-[5px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600 mb-[25px] relative"
                        name="asunto"
                        id="asunto"
                        rows="2"
                        required></textarea>
                    <p
                        id="asuntoError"
                        class="absolute bottom-[-6px] text-red-600 font-Figtree font-semibold mb-[10px] hidden"
                    >
                        Caracteres invalidos, revisa
                    </p>

                    <div class="relative">
                        <label
                            for="mensaje"
                            class="block font-Figtree italic font-semibold text-[90%] lg:text-[110%] text-Amarillo pb-[6px]"
                            >Mensaje</label
                        >
                        <textarea
                            class="bg-[#EAECEE] pl-[6px] pr-[15px] pt-[6px] font-Figtree font-thin text-[94%] text-justify leading-[1.2] min-h-[140px] max-h-[140px] text-black rounded-[5px] w-full outline-none border-[1px] border-Amarillo focus:ring-2 focus:ring-Amarillo invalid:focus:ring-red-600 mb-[30px]"
                            name="mensaje"
                            id="mensaje"
                            rows="15"
                            required></textarea>
                        <p
                            id="mensajeError"
                            class="absolute bottom-[-6px] text-red-600 font-Figtree font-semibold mb-[10px] hidden"
                        >
                            Caracteres invalidos, revisa
                        </p>
                    </div>

                    <label class="flex items-center space-x-2 mb-[30px]">
                        <input
                            type="checkbox"
                            class="h-5 w-5 text-Amarillo rounded-2xl"
                            required
                        />
                        <span
                            class="text-white hover:underline font-Figtree italic font-extralight text-[80%]"
                            ><a
                                href="/tratamientoDatosPersonales"
                                target="_blank"
                                >He leído y acepto las políticas de tratamiento
                                de datos</a
                            ></span
                        >
                    </label>

                    <button
                        type="submit"
                        class="py-[16px] px-[15%] bg-Amarillo font-Figtree font-bold text-white text-[105%] rounded-[8px] disabled:bg-Amarillo/90"
                        id="bEnviar">Enviar</button
                    >
                </form>
            </div>

            <div
                id="flexchild2"
                class="flex flex-col gap-[25px] order-1 lg:flex lg:flex-col lg:order-2 lg:gap-[20px] lg:w-1/2"
            >
                <div
                    class="bg-[url('/images/Contactanos_image.jpg')] bg-cover w-full h-[300px] order-2 lg:order-1 lg:h-1/2 rounded-[10px] shadow-md"
                >
                </div>
                <div
                    class="bg-Azul py-[10%] w-full lg:h-1/2 order-1 lg:order-2 lg:py-[10%] rounded-[10px] shadow-md"
                >
                    <h2
                        class="font-Figtree font-semibold italic mx-auto text-white max-w-[300px] text-[150%] lg:text-[180%] lg:max-w-[400px] leading-[1] mb-[40px]"
                    >
                        Conéctate a la red IdeaPro, #ValoraLoPublico
                    </h2>
                    <a
                        href="https://wa.link/eooqv5"
                        target="_blank"
                        class="group"
                    >
                        <div
                            id="flex2"
                            class="flex items-center gap-[20px] rounded-[10px] mx-auto max-w-[320px] pl-[2%] lg:max-w-[400px] mb-[25px] lg:pl-[6px] py-[4px] group-hover:bg-Amarillo transition-colors duration-500"
                        >
                            <div id="flexChild1">
                                <img
                                    src="/images/Whatsapp.png"
                                    alt=""
                                    class="w-[50px]"
                                />
                            </div>
                            <div id="flexChild2">
                                <p
                                    class="font-Figtree leading-[1.2] text-white text-[110%]"
                                >
                                    <span class="block font-bold">Whatsapp</span
                                    >
                                    <span class="font-extralight"
                                        >301563984</span
                                    >
                                </p>
                            </div>
                        </div>
                    </a>
                    <a
                        href="mailto:ideapro.consultores@gmail.com"
                        target="_blank"
                        class="group"
                    >
                        <div
                            id="flex2"
                            class="flex items-center gap-[20px] rounded-[10px] max-w-[320px] mx-auto pl-[2%] lg:max-w-[400px] mb-[25px] lg:pl-[6px] py-[4px] group-hover:bg-Amarillo transition-colors duration-500"
                        >
                            <div id="flexChild1">
                                <img
                                    src="/images/Correo.png"
                                    alt=""
                                    class="w-[50px]"
                                />
                            </div>
                            <div id="flexChild2">
                                <p
                                    class="font-Figtree leading-[1.2] text-white text-[110%]"
                                >
                                    <span class="block font-bold"
                                        >Correo Electrónico</span
                                    >
                                    <span class="font-extralight"
                                        >ideaproconsultores.gmail.com</span
                                    >
                                </p>
                            </div>
                        </div>
                    </a>
                    <a
                        href="https://www.linkedin.com/in/ideapro-consultores-582440212/?trk=org-employees&originalSubdomain=mx"
                        target="_blank"
                        class="group"
                    >
                        <div
                            id="flex2"
                            class="flex items-center gap-[20px] rounded-[10px] max-w-[320px] pl-[2%] mx-auto lg:max-w-[400px] lg:pl-[6px] py-[4px] group-hover:bg-Amarillo transition-colors duration-500"
                        >
                            <div id="flexChild1">
                                <img
                                    src="/images/Linkedin.png"
                                    alt=""
                                    class="w-[50px]"
                                />
                            </div>
                            <div id="flexChild2">
                                <p
                                    class="font-Figtree leading-[1.2] text-white text-[110%]"
                                >
                                    <span class="block font-bold">LinkedIn</span
                                    >
                                    <span class="font-extralight"
                                        >IDEAPRO Consultores</span
                                    >
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    window.onload = function () {
        const formulario = document.querySelector("#contactanos");
        const modal = document.querySelector("#modal");
        const boton = document.querySelector("#bEnviar");
        const nombreError = document.querySelector("#nombreError");
        const nombre = document.querySelector("#nombre");
        const asuntoError = document.querySelector("#asuntoError");
        const asunto = document.querySelector("#asunto");
        const mensajeError = document.querySelector("#mensajeError");
        const mensaje = document.querySelector("#mensaje");

        mensaje.addEventListener("input", (evento) =>
            comprobarString(evento, mensajeError),
        );
        nombre.addEventListener("input", (evento) =>
            comprobarString(evento, nombreError),
        );
        asunto.addEventListener("input", (evento) =>
            comprobarString(evento, asuntoError),
        );
        formulario.addEventListener("submit", enviarFormulario);

        async function enviarFormulario(evento) {
            evento.preventDefault();
            if (formulario instanceof HTMLFormElement)
                try {
                    const dataForm = new FormData(formulario);
                    const response = await fetch(formulario.action, {
                        method: "POST",
                        body: dataForm,
                    });
                    if (response.ok) {
                        modal.classList.remove("hidden");
                        setTimeout(() => {
                            (formulario.elements[0] as HTMLInputElement).value =
                                "";
                            (formulario.elements[1] as HTMLInputElement).value =
                                "";
                            (formulario.elements[2] as HTMLInputElement).value =
                                "";
                            (formulario.elements[4] as HTMLInputElement).value =
                                "";
                            (formulario.elements[5] as HTMLInputElement).value =
                                "";

                            modal.classList.add("hidden");
                        }, 3000);
                    }
                } catch (error) {
                    console.log(error);
                }
        }

        function HTMLbutton(valor, idbotton) {
            if (idbotton instanceof HTMLButtonElement) {
                if (valor == 1) {
                    idbotton.disabled = false;
                } else {
                    console.log("desactivado");
                    idbotton.disabled = true;
                }
            }
        }

        function comprobarString(evento, errorDiv) {
            if (isNaN(evento.target.value)) {
                HTMLbutton(1, boton);
                errorDiv.target.id.classList.add("hidden");
            } else if (evento.target.value == "") {
                HTMLbutton(1, boton);
                errorDiv.classList.add("hidden");
            } else {
                HTMLbutton(0, boton);
                errorDiv.classList.remove("hidden");
            }
        }
    };
</script>
